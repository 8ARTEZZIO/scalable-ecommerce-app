{% extends "base.html" %}
{% block content %}
<section class="py-5 text-center container">
    <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto rounded bg-secondary">
            <h1 class="fw-light text-light">Forest Equipment</h1>
            <p class="lead text-light">Looking for an elf-like equipment? Are you bored of normal camping? We've got you
                covered!</p>
        </div>
    </div>
</section>

<!-- Grid -->
  <div class="row g-4 justify-content-center">
    {% for p in products %}
    <div class="mb-5 col-12 col-sm-6 col-lg-4 col-xl-3 d-flex">
      <div class="card h-100 bg-dark border-0 shadow-sm flex-fill">
        <a href="{{ url_for('web.product', name=p.name) }}" class="text-decoration-none">
          <div class="ratio ratio-4x3 bg-black">
            {% if p.main_image_url %}
              <img src="{{ p.main_image_url }}" class="object-fit-cover" alt="{{ p.name }}">
            {% else %}
              <img src="{{ url_for('static', filename='img/placeholder.png') }}" class="rounded-top object-fit-cover" alt="No image">
            {% endif %}
          </div>
        </a>
        <div class="card-body d-flex flex-column">
          <h3 class="h6 mb-1"><a class="link-light text-decoration-none"
            href="{{ url_for('web.product', name=p.name) }}">{{ p.name }}</a></h3>
          <div class="mb-2">
            <span class="badge text-bg-success">{{ "%.2f"|format(p.price) }} {{ p.currency or 'USD' }}</span>
          </div>
          {% if p.description %}
            <p class="text-body-secondary small mb-3">{{ p.description[:110] }}{% if p.description|length > 110 %}â€¦{% endif %}</p>
          {% endif %}

          <div class="mt-auto d-flex gap-2">
            <a class="btn btn-outline-light btn-sm flex-fill"
               href="{{ url_for('web.product', name=p.name) }}">
              View
            </a>
            <form method="post" action="{{ url_for('web.add_to_cart', id=p.id) }}" class="flex-fill">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <button class="btn btn-success btn-sm w-100" type="submit">Add to cart</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

{% endblock %}
