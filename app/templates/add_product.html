{% extends "base.html" %}
{% block content %}
<section class="container py-5" style="max-width:780px;">
  <h1 class="h4 mb-4 text-dark">Quick add product (dev)</h1>

  <form method="POST" class="row g-3">
      {{ form.hidden_tag() }}
    <div class="col-md-8">
      {{ form.name(class="form-control", placeholder="Name") }}
    </div>
    <div class="col-md-8">
      {{ form.slug(placeholder="Slug (product URL)") }}
    </div>
    <div class="col-md-8">
      {{ form.price(class="form-control", placeholder="PRICE e.g. 12.99 or 1299") }}
    </div>
    <div class="col-md-8">
      {{ form.currency(class="form-control", placeholder="Currency e.g. USD") }}
    </div>
    <div class="col-md-8">
      {{ form.stock(class="form-control", placeholder="Stock") }}
    </div>
    <div class="col-md-8">
      {{ form.image_url(class="form-control", placeholder="IMG URL e.g.: https://...") }}
    </div>
    <div class="col-md-8">
      {{ form.description(class="form-control", placeholder="Description") }}
    </div>
    <div class="col-md-8">
      <div class="form-check">
        {{ form.active(placeholder="Status (Active)") }}
      </div>
    </div>

    <div class="col-12">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for message in messages %}
              <p>{{ message }}</p>
          {% endfor %}
          <p></p>
        {% endif %}
      {% endwith %}
      {{ render_field(form.submit) }}
      <a class="btn btn-outline-light ms-2" href="{{ url_for('web.products') }}">View store</a>
    </div>
  </form>

  {% if recent %}
  <hr class="my-4">
  <h2 class="h6 mb-3 text-dark">Recently added</h2>
  <div class="table-responsive">
    <table class="table table-dark table-sm align-middle">
      <thead><tr>
        <th>ID</th><th>Name</th><th>Slug</th><th>Price (cents)</th><th>Stock</th><th>Active</th>
      </tr></thead>
      <tbody>
        {% for p in recent %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.name }}</td>
          <td>{{ p.slug }}</td>
          <td>{{ p.price }}</td>
          <td>{{ p.stock }}</td>
          <td>{{ "✔" if p.is_active else "—" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</section>
{% endblock %}
