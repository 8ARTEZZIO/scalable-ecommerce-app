{% extends "base.html" %}
{% block content %}
<section class="container py-5" style="max-width:780px;">
  <h1 class="h4 mb-4 text-dark">Quick add product (dev)</h1>

  <form method="post" action="{{ url_for('api.products') }}" class="row g-3">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="col-md-8">
      <label class="form-label text-dark">Name</label>
      <input name="name" class="form-control" required>
    </div>
    <div class="col-md-4">
      <label class="form-label text-dark">Slug <span class="text-dark">(auto if empty)</span></label>
      <input name="slug" class="form-control" placeholder="auto">
    </div>

    <div class="col-md-4">
      <label class="form-label text-dark">Price</label>
      <input name="price" class="form-control" placeholder="e.g. 12.99 or 1299 (cents)" required>
    </div>
    <div class="col-md-2">
      <label class="form-label text-dark">Currency</label>
      <input name="currency" class="form-control" value="USD" maxlength="3">
    </div>
    <div class="col-md-2">
      <label class="form-label text-dark">Stock</label>
      <input name="stock" type="number" class="form-control" value="0" min="0">
    </div>
    <div class="col-12">
      <label class="form-label text-dark">Image URL</label>
      <input name="main_image_url" class="form-control" placeholder="https://...">
    </div>
    <div class="col-12">
      <label class="form-label text-dark">Description</label>
      <textarea name="description" class="form-control" rows="3"></textarea>
    </div>
    <div class="col-12">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="is_active" name="is_active" checked>
        <label class="form-check-label text-dark" for="is_active">Active</label>
      </div>
    </div>

    <div class="col-12">
      <button class="btn btn-success" type="submit">Add product</button>
      <a class="btn btn-outline-light ms-2" href="{{ url_for('api.products') }}">View store</a>
    </div>
  </form>

  {% if recent %}
  <hr class="my-4">
  <h2 class="h6 mb-3 text-dark">Recently added</h2>
  <div class="table-responsive">
    <table class="table table-dark table-sm align-middle">
      <thead><tr>
        <th>ID</th><th>Name</th><th>Slug</th><th>Price (cents)</th><th>Stock</th><th>Active</th>
      </tr></thead>
      <tbody>
        {% for p in recent %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.name }}</td>
          <td>{{ p.slug }}</td>
          <td>{{ p.price }}</td>
          <td>{{ p.stock }}</td>
          <td>{{ "✔" if p.is_active else "—" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</section>
{% endblock %}
